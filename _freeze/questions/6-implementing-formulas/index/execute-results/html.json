{
  "hash": "ae5ecd7d6c5b8c75812c01682b8a014e",
  "result": {
    "markdown": "---\ntitle: \"יישום נוסחאות בקוד\"\ndescription: |\n  תרגום נוסחה סטטיסטית לקוד SQL\nauthor: \"\"\ndate: \"2023-12-12\"\ntoc: true\ncategories: [בסיסי]\nimage: featured.png\ndraft: false\n---\n\n\n\n\nברוכים הבאים לתרגיל השישי!\n\n## הדאטה\n\nהתרגיל מורכב מטבלת פריטי כלי בית והסכום שבו הם נמכרו:\n\n\n::: {.cell}\n\n```{.sql .cell-code}\nSELECT TOP 5 * \nFROM Items_q6\n```\n\n\n<div class=\"knitsql-table\">\n\n\nTable: 5 records\n\n|category | amount|\n|:--------|------:|\n|Chairs   |     12|\n|Chairs   |     10|\n|Chairs   |     10|\n|Chairs   |     44|\n|Chairs   |     93|\n\n</div>\n:::\n\n\n## שאלה 1\n\nהינכם מתבקשים למדוד את מקדם השונות ([Coefficient of Variation](https://en.wikipedia.org/wiki/Coefficient_of_variation)) של כל קטגוריה מפריטי הבית.\n\nהנוסחה למדידת אותו מקדם היא כדלקמן:\n\n$$\nCV = \\frac{\\sigma}{\\mu}\n$$\n\nכלומר, חלוקת סטיית התקן של הקבוצה בממוצע שלה. יש למיין את הפלט בסדר יורד של ערכי ה-CV; קטגוריות עם ערך נמוך יותר יופיעו ראשונים וכן הלאה.\n\n## שאלה 2\n\nהתבקשם 'לנרמל' את עמודת הסכום בדאטה וליצור עמודה חדשה כך שכל הערכים המקוריים בכל קבוצה יהיו בטווח ערכים זהה של 0-100: הערך הכי גדול בכל קבוצה ימופה ל-100 ואילו הערך הקטן ביותר יהיה 0, וכך כל הערכים המקוריים ימופו לטווח הערכים ביניהם. \n\nכדי לנרמל את עמודת ה-Amount, השתמשו בנוסחה הבאה:\n\n$$\nZ_i = \\frac{X_i - min(x)}{max(x) - min(x)} * 100\n$$\nכאשר:  \n\n- $Z_i$: זה הערך $i$ המנורמל החדש  \n\n- $X_i$: הערך $i$ שעובר נרמול  \n\n- $min(x)$: הערך המינימלי במערך $X$  \n\n- $max(x)$: הערך המקסימלי במערך $X$   \n\nשימו לב לבצע את הנרמול עבור כל קבוצה בנפרד.\n\n\n\n## יצירת הטבלה\n\n\n::: {.cell}\n\n```{.sql .cell-code style=\"max-height: 200px;overflow: scroll;\"}\nDROP TABLE IF EXISTS ITEMS_Q6;\n\n\nCREATE TABLE items_q6\n    ([category] varchar(6), [amount] int)\n;\n    \nINSERT INTO items_q6\n    ([category], [amount])\nVALUES\n    ('Chairs', 12),\n    ('Chairs', 10),\n    ('Chairs', 10),\n    ('Chairs', 44),\n    ('Chairs', 93),\n    ('Chairs', 93),\n    ('Chairs', 32),\n    ('Chairs', 99),\n    ('Chairs', 95),\n    ('Chairs', 98),\n    ('Chairs', 85),\n    ('Chairs', 1),\n    ('Chairs', 39),\n    ('Chairs', 95),\n    ('Chairs', 91),\n    ('Chairs', 15),\n    ('Chairs', 38),\n    ('Chairs', 47),\n    ('Chairs', 31),\n    ('Chairs', 20),\n    ('Tables', 80),\n    ('Tables', 602),\n    ('Tables', 913),\n    ('Tables', 694),\n    ('Tables', 241),\n    ('Tables', 981),\n    ('Tables', 477),\n    ('Tables', 187),\n    ('Tables', 111),\n    ('Tables', 603),\n    ('Tables', 73),\n    ('Tables', 47),\n    ('Tables', 74),\n    ('Tables', 37),\n    ('Tables', 691),\n    ('Tables', 93),\n    ('Tables', 487),\n    ('Tables', 873),\n    ('Tables', 775),\n    ('Tables', 4),\n    ('Sofas', 146),\n    ('Sofas', 431),\n    ('Sofas', 330),\n    ('Sofas', 161),\n    ('Sofas', 308),\n    ('Sofas', 437),\n    ('Sofas', 97),\n    ('Sofas', 55),\n    ('Sofas', 383),\n    ('Sofas', 422),\n    ('Sofas', 127),\n    ('Sofas', 331),\n    ('Sofas', 213),\n    ('Sofas', 29),\n    ('Sofas', 260),\n    ('Sofas', 244),\n    ('Sofas', 398),\n    ('Sofas', 497),\n    ('Sofas', 276),\n    ('Sofas', 397),\n    ('Plates', 50),\n    ('Plates', 6),\n    ('Plates', 16),\n    ('Plates', 29),\n    ('Plates', 2),\n    ('Plates', 6),\n    ('Plates', 9),\n    ('Plates', 20),\n    ('Plates', 3),\n    ('Plates', 48),\n    ('Plates', 23),\n    ('Plates', 27),\n    ('Plates', 46),\n    ('Plates', 18),\n    ('Plates', 5),\n    ('Plates', 12),\n    ('Plates', 9),\n    ('Plates', 15),\n    ('Plates', 12),\n    ('Plates', 14),\n    ('Cups', 2),\n    ('Cups', 10),\n    ('Cups', 6),\n    ('Cups', 4),\n    ('Cups', 2),\n    ('Cups', 4),\n    ('Cups', 4),\n    ('Cups', 5),\n    ('Cups', 10),\n    ('Cups', 4),\n    ('Cups', 3),\n    ('Cups', 6),\n    ('Cups', 4),\n    ('Cups', 6),\n    ('Cups', 2),\n    ('Cups', 4),\n    ('Cups', 2),\n    ('Cups', 9),\n    ('Cups', 7),\n    ('Cups', 1)\n;\n\n```\n:::\n\n\n## תשובות\n\n### סרטון הסבר\n\n\n\n{{< video https://youtu.be/E4y7uU8N-Ks >}}\n\n\n\n\n### תשובה 1\n\n<details>\n\n<summary>הצג פתרון</summary>\n\n\n::: {.cell}\n\n```{.sql .cell-code}\nSELECT category,\n\tSTDEV(AMOUNT) / AVG(AMOUNT) AS CV\nFROM items_q6\nGROUP BY CATEGORY\nORDER BY CV;\n```\n:::\n\n\n</details>\n\n\n::: {.cell}\n<div class=\"knitsql-table\">\n\n\nTable: 5 records\n\n|category |        CV|\n|:--------|---------:|\n|Sofas    | 0.5020680|\n|Cups     | 0.6633002|\n|Chairs   | 0.7032536|\n|Plates   | 0.8195745|\n|Tables   | 0.8481626|\n\n</div>\n:::\n\n\n### תשובה 2\n\n<details>\n\n<summary>הצג פתרון</summary>\n\n\n::: {.cell}\n\n```{.sql .cell-code}\nSELECT category,\n\tamount,\n\tamount_noramlized = (AMOUNT - MIN(AMOUNT) OVER (PARTITION BY category)) * 100.0 / \n\t\t\t\t\t\t(MAX(AMOUNT) OVER (PARTITION BY category) - MIN(AMOUNT) OVER (PARTITION BY category))\nFROM items_q6\norder by category, amount_noramlized\n\n```\n:::\n\n\n</details>\n\n\n::: {.cell}\n<div class=\"knitsql-table\">\n\n\nTable: Displaying records 1 - 10\n\n|category | amount| amount_noramlized|\n|:--------|------:|-----------------:|\n|Chairs   |      1|          0.000000|\n|Chairs   |     10|          9.183673|\n|Chairs   |     10|          9.183673|\n|Chairs   |     12|         11.224490|\n|Chairs   |     15|         14.285714|\n|Chairs   |     20|         19.387755|\n|Chairs   |     31|         30.612245|\n|Chairs   |     32|         31.632653|\n|Chairs   |     38|         37.755102|\n|Chairs   |     39|         38.775510|\n\n</div>\n:::\n\n::: {.cell}\n\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}