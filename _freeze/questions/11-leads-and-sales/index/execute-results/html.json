{
  "hash": "c9d9832f4409cc2e510b7f8e3e19e2a8",
  "result": {
    "markdown": "---\ntitle: \"לידים ומכירות לפי מקור\"\ndescription: |\n  ספירת לידים לפי מקור ושנה, וסכימת מכירות לפי מקור ושנת סגירה\nauthor: \"\"\ndate: \"2026-01-29\"\ntoc: true\ncategories: [בסיסי]\nimage: featured.png\ndraft: true\nfilters:\n  - interactive-sql\ndatabases:\n  - name: leads_q11\n    path: \"https://raw.githubusercontent.com/AmitLevinson/sql-website/main/questions/11-leads-and-sales/q11.sql\"\n---\n\n\n\n\nברוכים הבאים לתרגיל ה-11!\n\nבתרגיל הזה נתרגל שתי שאלות “יום-יומיות” של אנליסט: ספירה לפי מקור ושנה, וסכימה (Revenue) לפי מקור ושנת סגירה.\n\n## הדאטה\n\nיש לנו שתי טבלאות:\n\n- `leads`\n  - `lead_id`: מזהה ליד\n  - `source`: מקור הליד (למשל Email / Social Media / Referral)\n  - `created_date`: תאריך יצירת הליד\n- `sales`\n  - `lead_id`: מזהה ליד (FK לטבלת `leads`)\n  - `amount`: סכום מכירה\n  - `closed_date`: תאריך סגירת המכירה\n\n## שאלות\n\n### שאלה 1\n\nכתבו שאילתה שמחזירה את **מספר הלידים** שנוצרו דרך `'Email'` בשנת **2025**.\n\n### שאלה 2\n\nכתבו שאילתה שמחזירה את **סך סכום המכירות** שנוצר ממכירות של לידים שמקורם `'Social Media'`, כאשר תאריך הסגירה (`closed_date`) הוא בשנת **2025**.\n\n## נסו בעצמכם\n\n### אונליין\n\n<mark>נסו בחלון טקסט למטה (SQLite):</mark>\n\n```{.sql .interactive .leads_q11}\n-- Quick peek:\nSELECT *\nFROM leads\nLIMIT 10;\n\n-- SELECT *\n-- FROM sales\n-- LIMIT 10;\n```\n\n## תשובות\n\nשימו לב: תיבת האונליין היא **SQLite**, ולכן פונקציות “שנה” שונות מ-T‑SQL.\n\n### תשובה 1\n\n#### SQLite (האונליין)\n\n```{.sql .interactive .leads_q11}\nSELECT COUNT(DISTINCT lead_id) AS n_leads\nFROM leads\nWHERE source = 'Email'\n  AND strftime('%Y', created_date) = '2025';\n```\n\n#### T‑SQL (SQL Server)\n\n<details>\n<summary>הצג פתרון</summary>\n\n\n::: {.cell}\n\n```{.sql .cell-code}\nSELECT COUNT(DISTINCT lead_id) AS n_leads\nFROM leads\nWHERE source = 'Email'\n  AND YEAR(created_date) = 2025;\n```\n:::\n\n\n</details>\n\n### תשובה 2\n\n#### SQLite (האונליין)\n\n```{.sql .interactive .leads_q11}\nSELECT SUM(s.amount) AS total_sales_amount\nFROM leads l\nJOIN sales s ON s.lead_id = l.lead_id\nWHERE l.source = 'Social Media'\n  AND strftime('%Y', s.closed_date) = '2025';\n```\n\n#### T‑SQL (SQL Server)\n\n<details>\n<summary>הצג פתרון</summary>\n\n\n::: {.cell}\n\n```{.sql .cell-code}\nSELECT SUM(s.amount) AS total_sales_amount\nFROM leads l\nJOIN sales s ON s.lead_id = l.lead_id\nWHERE l.source = 'Social Media'\n  AND YEAR(s.closed_date) = 2025;\n```\n:::\n\n\n</details>\n\n\n::: {.cell}\n\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}